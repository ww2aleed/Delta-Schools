<!DOCTYPE html>
<html lang="ar" dir="ltr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>🌍 Full Lesson: My Environment</title>
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;700&family=Roboto:wght@400;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg-color: #f0f4f8; --card-color: #ffffff; --accent-color: #2e7d32; 
            --text-color: #212121; --highlight-color: #c8e6c9; --speak-highlight: #1b5e20; 
            --play-all-btn: #4caf50; --secondary-text-color: #424242; --border-color: #81c784; 
        }
        body { font-family: 'Cairo', sans-serif; background-color: var(--bg-color); margin: 0; padding: 20px; text-align: center; color: var(--text-color); }
        .container { max-width: 1000px; margin: 0 auto 50px auto; background-color: var(--card-color); border-radius: 25px; box-shadow: 0 15px 30px rgba(0, 0, 0, 0.15); padding: 40px; border: 8px solid var(--accent-color); }
        h1 { color: var(--accent-color); font-size: 2.5em; margin-bottom: 10px; }
        h2 { color: #1b5e20; border-bottom: 2px solid #81c784; display: inline-block; padding-bottom: 5px; }
        h3 { background-color: var(--highlight-color); padding: 12px; border-radius: 10px; margin-top: 30px; text-align: right; direction: ltr; font-size: 1.6em; }
        .speech-controls { background: #e8f5e9; padding: 15px; border-radius: 15px; margin-bottom: 20px; display: flex; flex-wrap: wrap; justify-content: center; gap: 15px; align-items: center; }
        .control-group { display: flex; align-items: center; gap: 8px; font-weight: bold; }
        table { width: 100%; border-collapse: separate; border-spacing: 0; margin-top: 15px; text-align: right; direction: ltr; border-radius: 15px; overflow: hidden; }
        th, td { border: 1px solid var(--border-color); padding: 12px; }
        th { background-color: var(--accent-color); color: white; }
        td:nth-child(odd) { background-color: #f1f8e9; }
        .play-btn { background-color: var(--play-all-btn); color: white; border: none; padding: 12px 25px; border-radius: 12px; cursor: pointer; font-size: 1.1em; box-shadow: 0 5px #388e3c; margin: 10px 0; }
        .play-btn:active { transform: translateY(3px); box-shadow: 0 2px #388e3c; }
        
        /* تصميم زر القسم الصغير */
        .section-play-btn { background-color: #558b2f; padding: 8px 15px; font-size: 0.9em; margin-bottom: 15px; }
        
        /* زر الإيقاف العائم */
        #floating-stop-btn {
            position: fixed; bottom: 20px; right: 20px; 
            background: #d32f2f; color: white; border: none; 
            border-radius: 50%; width: 60px; height: 60px; 
            cursor: pointer; box-shadow: 0 4px 10px rgba(0,0,0,0.3); 
            display: none; z-index: 1000; font-weight: bold;
        }

        .vocab-element, .english-sentence { cursor: pointer; transition: 0.2s; padding: 2px 5px; border-radius: 4px; display: inline-block; font-family: 'Roboto', sans-serif; font-weight: 700; color: #1a237e; }
        .english-sentence { display: block; text-align: left; font-size: 1.2em; margin-bottom: 5px; color: #000; }
        .speaking-highlight { background-color: var(--speak-highlight) !important; color: white !important; }
        .arabic-translation { display: block; text-align: right; color: var(--secondary-text-color); border-bottom: 1px dashed #ccc; margin-bottom: 15px; padding-bottom: 5px; font-size: 1.05em; font-weight: bold; }
        .dialogue-line { display: flex; margin-bottom: 10px; background: #f9f9f9; padding: 15px; border-radius: 10px; direction: ltr; }
        .speaker { font-weight: bold; color: var(--accent-color); min-width: 80px; text-align: left; margin-right: 10px; }
        
    </style>
    <style>
        /* ===== Mobile overflow / drift fix ===== */
html, body { overflow-x: hidden; }
* { box-sizing: border-box; }

/* Make common containers never exceed the screen */
.container, .wrap, .content, .main, body > div {
  max-width: 100%;
}

/* Prevent any element from forcing horizontal scroll */
img, video, iframe, canvas, svg {
  max-width: 100%;
  height: auto;
}

/* Fix long text/URLs from pushing width */
p, h1, h2, h3, h4, h5, h6, div, span, a, button {
  overflow-wrap: anywhere;
  word-break: break-word;
}

/* If you use cards/grids/sticky toolbars */
.controls, .header, .search {
  max-width: 100%;
  min-width: 0;
}

/* Mobile-specific tightening */
@media (max-width: 600px) {
  body { padding: 10px !important; }
  .container { padding: 14px !important; border-width: 2px !important; border-radius: 16px !important; }
}
</style>
</head>
<body>
<style>
  /* تنسيق شاشة القفل */
  #lockScreen {
    position: fixed; 
    top: 0; left: 0; width: 100%; height: 100%;
    /* تم إصلاح الرابط هنا ليكون سطر واحد */
    background-image: url('https://i.ibb.co/0T6tY6v/Whats-App-Image-2026-01-25-at-8-02-36-AM-1.jpg'); 
    background-size: cover;
    background-position: center;
    z-index: 10000; 
    display: flex; 
    align-items: center; 
    justify-content: center;
    font-family: 'Segoe UI', Tahoma, sans-serif;
    transition: opacity 0.4s ease; /* تأثير تلاشي أنعم */
  }

  #lockScreen::before {
    content: "";
    position: absolute;
    top: 0; left: 0; width: 100%; height: 100%;
    background: rgba(0, 0, 0, 0.6); 
    z-index: -1;
  }

  /* صندوق كلمة المرور */
  .lock-box {
    background: rgba(255, 255, 255, 0.98); 
    padding: 30px 20px; 
    border-radius: 20px; 
    text-align: center;
    box-shadow: 0 20px 40px rgba(0,0,0,0.5); 
    width: 280px; 
    animation: fadeIn 0.5s ease;
  }

  @keyframes fadeIn {
    from { opacity: 0; transform: translateY(-20px); }
    to { opacity: 1; transform: translateY(0); }
  }

  .lock-box h2 { margin: 0; color: #166534; font-size: 20px; }
  .lock-box p { color: #666; font-size: 13px; margin: 8px 0 20px; }

  .lock-box input {
    width: 90%; 
    padding: 12px; 
    margin-bottom: 15px; 
    border: 2px solid #eee; 
    border-radius: 10px; 
    font-size: 16px; 
    text-align: center;
    outline: none;
    transition: border-color 0.3s;
  }

  .lock-box input:focus {
    border-color: #166534;
  }

  .lock-box button {
    background: #166534; 
    color: white; 
    border: none; 
    padding: 12px; 
    border-radius: 10px; 
    cursor: pointer; 
    font-weight: bold; 
    width: 100%; 
    font-size: 15px;
    transition: background 0.3s;
  }

  .lock-box button:hover {
    background: #15803d;
  }

  /* تنسيق المحتوى بعد الفتح (مدارس دلتا) */
  .teacher-branding {
    background: white; 
    border-radius: 20px; 
    padding: 25px; 
    display: flex; 
    flex-direction: column; 
    align-items: center; 
    justify-content: center;
    margin: 60px auto; 
    width: 90%;
    max-width: 400px; 
    border-bottom: 5px solid #fbbf24; 
    box-shadow: 0 10px 25px rgba(0,0,0,0.1);
    text-align: center;
  }

  .teacher-branding img { 
    width: 130px; 
    height: 130px; 
    border-radius: 15px; 
    object-fit: contain; 
    margin-bottom: 15px;
    border: 1px solid #f0f0f0;
  }

  .teacher-details h3 { margin: 0; color: #166534; font-size: 24px; }
  .teacher-details p { margin: 5px 0; font-size: 18px; color: #444; }
</style>

<style>
  /* ... (نفس تنسيقات شاشة القفل السابقة تبقى كما هي) ... */

  /* تنسيق بطاقة مدارس دلتا: اللوجو بجانب النص */
  .teacher-branding {
    background: white; 
    border-radius: 20px; 
    padding: 20px 30px; 
    display: flex; 
    flex-direction: row; /* جعل العناصر بجانب بعضها */
    align-items: center; 
    justify-content: center; /* توسيط المحتوى بالكامل */
    margin: 60px auto; 
    width: fit-content; /* جعل العرض على مقاس المحتوى */
    min-width: 350px;
    border-bottom: 5px solid #fbbf24; 
    box-shadow: 0 10px 25px rgba(0,0,0,0.1);
    direction: ltr; /* لضمان بقاء اللوجو يسار النص */
  }

  .teacher-branding img { 
    width: 90px; /* حجم متناسق للوضع الأفقي */
    height: 90px; 
    border-radius: 12px; 
    object-fit: contain; 
    margin-right: 20px; /* مسافة بين اللوجو والنص */
    border: 1px solid #f0f0f0;
  }

  .teacher-details {
    text-align: left; /* محاذاة النص لليسار ليتناسب مع اللوجو */
  }

  .teacher-details h3 { 
    margin: 0; 
    color: #166534; 
    font-size: 24px; 
    line-height: 1.2;
  }

  .teacher-details p { 
    margin: 2px 0 0 0; 
    font-size: 18px; 
    color: #444; 
    font-weight: bold;
  }

  /* ... (بقية التنسيقات) ... */
</style>

<div class="teacher-branding">
  <img src="https://i.ibb.co/QF17ngZb/Whats-App-Image-2026-01-25-at-8-02-35-AM.jpg" alt="Delta Schools Logo">
  <div class="teacher-details">
    <h3>Delta Schools</h3>
    
  </div>
</div>
</div>

<script>
  function validateAccess() {
    const inputField = document.getElementById('passField');
    const code = inputField.value;
    const masterKey = "Delta Schools"; 
    
    if(code === masterKey) {
      const screen = document.getElementById('lockScreen');
      screen.style.opacity = '0';
      setTimeout(() => {
        screen.style.display = 'none';
      }, 400);
    } else {
      // تغيير لون الإطار للأحمر للتنبيه
      inputField.style.borderColor = "#ef4444";
      alert("⚠️ عذراً، كلمة المرور خاطئة!");
      inputField.value = ""; // مسح الخانة للمحاولة مرة أخرى
      inputField.focus();
    }
  }

  // دعم زر Enter
  document.getElementById('passField').addEventListener("keypress", function(e) {
    if (e.key === "Enter") { validateAccess(); }
  });
</script>

<button id="floating-stop-btn" onclick="stopSpeech()">إيقاف ⏹️</button>

<div class="container">
    <h1>🌍 Unit: My Environment ✨</h1>
    <h2>Lesson: Key Vocabulary</h2>
    
    <div class="speech-controls">
        <div class="control-group"><label>🗣️ اللكنة:</label>
            <select id="voice-select"><option value="en-US">American (US) 🇺🇸</option><option value="en-GB">British (UK) 🇬🇧</option></select>
        </div>
        <div class="control-group"><label>⚡ السرعة:</label>
            <input type="range" id="speed-slider" min="0.5" max="1.2" value="0.9" step="0.1">
        </div>
        <button id="stop-btn" onclick="stopSpeech()" style="background:#d32f2f; color:white; border:none; border-radius:8px; padding:8px 15px; cursor:pointer;">إيقاف ⏹️</button>
    </div>

    <button id="play-all-vocab-btn" class="play-btn">▶️ نطق جميع الكلمات والأفعال</button>

    <h3>📚 I Vocabulary (المفردات الأساسية)</h3>
    <button class="play-btn section-play-btn" onclick="playSection('main-vocab')">▶️ نطق هذا القسم</button>
    <table id="main-vocab"><tbody></tbody></table>

    <h3>➕ Extra Vocabulary (مفردات إضافية)</h3>
    <button class="play-btn section-play-btn" onclick="playSection('extra-vocab')">▶️ نطق هذا القسم</button>
    <table id="extra-vocab"><tbody></tbody></table>

    <h3>🔗 Important Expressions (تعبيرات وحروف جر)</h3>
    <button class="play-btn section-play-btn" onclick="playSection('expressions')">▶️ نطق هذا القسم</button>
    <table id="expressions"><tbody></tbody></table>

    <h3>🔄 Conjugation of Verbs (تصريف الأفعال)</h3>
    <button class="play-btn section-play-btn" onclick="playSection('verbs')">▶️ نطق هذا القسم</button>
    <table id="verbs">
        <thead><tr><th>Present (مضارع)</th><th>Past (ماضي)</th><th>المعنى</th></tr></thead>
        <tbody></tbody>
    </table>

    <h3>💡 Definitions (التعاريف الهامة)</h3>
    <button class="play-btn section-play-btn" onclick="playSection('definitions')">▶️ نطق هذا القسم</button>
    <table id="definitions"><tbody></tbody></table>

    <h3>📖 Listening and Reading (المحادثة)</h3>
    <button id="play-all-story-btn" class="play-btn" style="background:#1976d2; box-shadow: 0 5px #1565c0;">🎧 تشغيل المحادثة كاملة</button>
    <div id="story-container" style="text-align:left; border: 2px solid var(--accent-color); padding: 20px; border-radius: 15px; margin-top:10px;"></div>
</div>

<script>
    const mainVocab = [
        {en:"environment", ar:"البيئة"}, {en:"building", ar:"مبنى"},
        {en:"city", ar:"مدينة (كبيرة)"}, {en:"village", ar:"قرية"},
        {en:"oasis", ar:"واحة"}, {en:"river", ar:"نهر"},
        {en:"simply", ar:"ببساطة"}, {en:"advantages", ar:"مزايا / فوائد"},
        {en:"land", ar:"أرض"}, {en:"the Nile River", ar:"نهر النيل"},
        {en:"tent", ar:"خيمة"}, {en:"project", ar:"مشروع"},
        {en:"wells", ar:"آبار"}, {en:"challenges", ar:"تحديات"}
    ];

    const extraVocab = [
        {en:"neighbors", ar:"جيران"}, {en:"villagers", ar:"القرويين"}
    ];

    const expressions = [
        {en:"flow through", ar:"يتدفق عبر"}, {en:"travel on", ar:"يسافر على"},
        {en:"do for living", ar:"يعمل لكسب الرزق"}, {en:"different from", ar:"مختلف عن"}
    ];

    const verbs = [
        {p:"compare", s:"compared", ar:"يقارن"}, {p:"realize", s:"realized", ar:"يدرك"},
        {p:"farm", s:"farmed", ar:"يزرع"}, {p:"raise", s:"raised", ar:"يربي (ماشية)"},
        {p:"adapt", s:"adapted", ar:"يتكيف / يتأقلم"}, {p:"flow", s:"flowed", ar:"يتدفق"},
        {p:"choose", s:"chose", ar:"يختار"}, {p:"write", s:"wrote", ar:"يكتب"},
        {p:"know", s:"knew", ar:"يعرف"}, {p:"understand", s:"understood", ar:"يفهم"}
    ];

    const definitions = [
        {t:"city", d:"is a big place with many people, cars, and tall buildings", ar:"مكان كبير به العديد من الأشخاص والسيارات والمباني الشاهقة"},
        {t:"village", d:"is a small place with few people and many farms", ar:"هو مكان صغير به عدد قليل من الناس والعديد من المزارع"},
        {t:"river", d:"is a long line of water that moves to the sea", ar:"هو مجرى طويل من الماء يتحرك نحو البحر"},
        {t:"oasis", d:"is a green place with water in the desert", ar:"هو مكان أخضر به ماء في الصحراء"},
        {t:"buildings", d:"are houses, schools, or offices where people live or work", ar:"هي منازل أو مدارس أو مكاتب يعيش أو يعمل فيها الناس"},
        {t:"environment", d:"is everything around us, like air, water, plants, and animals", ar:"هو كل شيء من حولنا مثل الهواء والماء والنباتات والحيوانات"}
    ];

    const story = [
        {s:"Maha", en:"Hi, Salma, did you finish the project our teacher asked us to do last week?", ar:"مرحباً يا سلمى، هل أنهيت المشروع الذي طلبت منا معلمتنا القيام به الأسبوع الماضي ؟"},
        {s:"Salma", en:"Yes, I did. I enjoyed it a lot. What about you?", ar:"نعم، لقد فعلت. لقد استمتعت به كثيراً. ماذا عنك ؟"},
        {s:"Maha", en:"I worked on it with my cousin. We compared life in the city with life in the village. What did you choose?", ar:"لقد عملت عليه مع ابنة عمي قارنا الحياة في المدينة بالحياة في القرية، ماذا اخترتِ ؟"},
        {s:"Salma", en:"I wrote about the desert. I explained how people lived in tents, traveled on camels, and used wells for water.", ar:"كتبت عن الصحراء، قمت بتوضيح كيف يعيش الناس في الخيام، ويسافرون على الجمال، ويستخدمون الآبار للحصول على المياه."},
        {s:"Maha", en:"That's interesting! I learned that people in villages lived simply. They farmed, raised animals, and knew all their neighbors.", ar:"هذا مثير للاهتمام! لقد تعلمت أن الناس في القرى كانوا يعيشون ببساطة كانوا يزرعون ويربون الحيوانات ويعرفون جميع جيرانهم."},
        {s:"Salma", en:"And city life was different. People lived in tall buildings, used cars and buses, and had shops everywhere.", ar:"وكانت حياة المدينة مختلفة، عاش الناس في مباني شاهقة، واستخدموا سيارات وحافلات وكان لديهم متاجر في كل مكان."},
        {s:"Maha", en:"Exactly. I realized every place had advantages and challenges.", ar:"بالضبط، أدركت أن لكل مكان مزايا وتحديات."},
        {s:"Salma", en:"Yes, the project helped us understand how people adapted to their environments.", ar:"نعم، ساعدنا المشروع على فهم كيفية تكيف الناس مع بيئاتهم."}
    ];

    const synth = window.speechSynthesis;
    let speakQueue = [];
    let isAutoPlaying = false;

    function speak(text, el) {
        stopSpeech();
        const utter = new SpeechSynthesisUtterance(text);
        utter.lang = document.getElementById('voice-select').value;
        utter.rate = document.getElementById('speed-slider').value;
        if(el) { el.classList.add('speaking-highlight'); utter.onend = () => el.classList.remove('speaking-highlight'); }
        synth.speak(utter);
    }

    function stopSpeech() {
        synth.cancel();
        isAutoPlaying = false;
        document.getElementById('floating-stop-btn').style.display = 'none';
        document.querySelectorAll('.speaking-highlight').forEach(el => el.classList.remove('speaking-highlight'));
    }

    function buildTable(data, id) {
        const tb = document.querySelector(`#${id} tbody`);
        for(let i=0; i<data.length; i+=2) {
            const tr = document.createElement('tr');
            [i, i+1].forEach(idx => {
                if(data[idx]) {
                    const tdEn = document.createElement('td');
                    const span = document.createElement('span'); span.className='vocab-element'; span.innerText=data[idx].en;
                    span.onclick = () => speak(data[idx].en, span);
                    tdEn.appendChild(span);
                    const tdAr = document.createElement('td'); tdAr.innerText=data[idx].ar;
                    tr.append(tdEn, tdAr); speakQueue.push(span);
                }
            });
            tb.appendChild(tr);
        }
    }

    window.onload = () => {
        buildTable(mainVocab, 'main-vocab');
        buildTable(extraVocab, 'extra-vocab');
        
        const expTb = document.querySelector('#expressions tbody');
        expressions.forEach(e => {
            const tr = document.createElement('tr');
            tr.innerHTML = `<td><span class="vocab-element">${e.en}</span></td><td>${e.ar}</td>`;
            const s = tr.querySelector('.vocab-element'); s.onclick=()=>speak(e.en, s);
            speakQueue.push(s); expTb.appendChild(tr);
        });

        const vTb = document.querySelector('#verbs tbody');
        verbs.forEach(v => {
            const tr = document.createElement('tr');
            tr.innerHTML = `<td><span class="vocab-element">${v.p}</span></td><td><span class="vocab-element">${v.s}</span></td><td>${v.ar}</td>`;
            const s1=tr.querySelectorAll('.vocab-element')[0], s2=tr.querySelectorAll('.vocab-element')[1];
            s1.onclick=()=>speak(v.p, s1); s2.onclick=()=>speak(v.s, s2);
            speakQueue.push(s1, s2); vTb.appendChild(tr);
        });

        const dTb = document.querySelector('#definitions tbody');
        definitions.forEach(d => {
            const tr = document.createElement('tr');
            tr.innerHTML = `<td><strong>${d.t}</strong></td><td><span class="vocab-element">${d.d}</span></td><td>${d.ar}</td>`;
            const s = tr.querySelector('.vocab-element'); s.onclick=()=>speak(d.d, s);
            speakQueue.push(s); dTb.appendChild(tr);
        });

        const sBox = document.getElementById('story-container');
        story.forEach(s => {
            const div = document.createElement('div'); div.className='dialogue-line';
            div.innerHTML = `<span class="speaker">${s.s}:</span><div style="flex-grow:1"><span class="english-sentence">${s.en}</span><span class="arabic-translation">${s.ar}</span></div>`;
            const sent = div.querySelector('.english-sentence'); sent.onclick=()=>speak(s.en, sent);
            sBox.appendChild(div);
        });
    };

    const playList = (elements) => {
        stopSpeech();
        isAutoPlaying = true;
        document.getElementById('floating-stop-btn').style.display = 'block';
        let i = 0;
        function next() {
            if(i < elements.length && isAutoPlaying) {
                const utter = new SpeechSynthesisUtterance(elements[i].innerText);
                utter.lang = document.getElementById('voice-select').value;
                utter.rate = document.getElementById('speed-slider').value;
                elements[i].classList.add('speaking-highlight');
                elements[i].scrollIntoView({behavior:"smooth", block:"center"});
                utter.onend = () => { 
                    elements[i].classList.remove('speaking-highlight'); 
                    i++; 
                    if(i < elements.length) next(); 
                    else stopSpeech();
                };
                synth.speak(utter);
            } else {
                stopSpeech();
            }
        }
        next();
    };

    // وظيفة نطق قسم محدد
    function playSection(id) {
        const elements = document.querySelectorAll(`#${id} .vocab-element`);
        playList(elements);
    }

    document.getElementById('play-all-vocab-btn').onclick = () => playList(speakQueue);
    document.getElementById('play-all-story-btn').onclick = () => playList(document.querySelectorAll('.english-sentence'));
</script>
</body>
</html>
