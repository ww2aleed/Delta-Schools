<!DOCTYPE html>
<html lang="ar" dir="ltr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>🪁 Story: The Lost Kite (Full Complete Version)</title>
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;700&family=Roboto:wght@400;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg-color: #f0f4f8; --accent-color: #0288d1; --text-color: #2c3e50; 
            --highlight-color: #e3f2fd; --speak-highlight: #1565c0; 
        }
        body { font-family: 'Cairo', sans-serif; background-color: var(--bg-color); padding: 15px; margin: 0; color: var(--text-color); }
        .container { max-width: 950px; margin: 0 auto; background: white; border-radius: 30px; padding: 25px; border: 5px solid var(--accent-color); box-shadow: 0 10px 25px rgba(0,0,0,0.1); }
        
        .controls { position: sticky; top: 10px; z-index: 1000; background: #fff; padding: 12px; border-radius: 15px; box-shadow: 0 4px 10px rgba(0,0,0,0.1); margin-bottom: 25px; display: flex; justify-content: center; gap: 20px; align-items: center; border: 1px solid #ddd; }
        
        .info-card { background: #fff; border: 2px solid #e0e0e0; border-radius: 20px; padding: 20px; margin-bottom: 25px; direction: ltr; }
        .info-header { background: var(--accent-color); color: white; padding: 5px 15px; border-radius: 8px; display: inline-block; margin-bottom: 10px; font-weight: bold; }
        
        .vocab-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(130px, 1fr)); gap: 8px; }
        .vocab-item { background: #f1f8ff; border: 1px solid #bbdefb; padding: 8px; border-radius: 10px; text-align: center; cursor: pointer; }
        .vocab-eng { display: block; font-weight: bold; color: var(--speak-highlight); font-family: 'Roboto', sans-serif; }
        
        .char-box { display: flex; flex-wrap: wrap; gap: 10px; margin-top: 10px; direction: rtl; text-align: right; }
        .char-item { background: #e8f5e9; border: 1px solid #c8e6c9; padding: 10px 15px; border-radius: 12px; flex: 1; min-width: 200px; }
        .char-item b { color: #2e7d32; display: block; margin-bottom: 5px; }

        /* أزرار تشغيل الأقسام قبل العناوين */
        .btn-section-play { border: none; padding: 12px 25px; border-radius: 50px; cursor: pointer; font-weight: bold; color: white; display: flex; align-items: center; gap: 10px; margin: 35px 0 10px 0; box-shadow: 0 4px 8px rgba(0,0,0,0.15); transition: 0.2s; font-family: 'Cairo', sans-serif; width: fit-content; }
        .btn-section-play:active { transform: scale(0.95); }
        .play-p1 { background: #0288d1; } .play-p2 { background: #f39c12; } .play-p3 { background: #27ae60; }

        .major-title { padding: 12px; border-radius: 15px; margin-bottom: 20px; font-size: 1.4em; font-weight: bold; text-align: center; color: white; }
        
        .sentence-row { background: #ffffff; border: 2px solid #eef2f3; border-radius: 15px; padding: 20px; margin-bottom: 15px; text-align: left; }
        .eng-single { font-size: 1.35em; font-weight: 700; color: #1a237e; display: block; margin-bottom: 10px; cursor: pointer; font-family: 'Roboto', sans-serif; line-height: 1.6; }
        .arb-single { font-size: 1.15em; color: #546e7a; display: block; direction: rtl; text-align: right; border-top: 1px dashed #cfd8dc; padding-top: 10px; }
        
        .speaking-highlight { background-color: var(--speak-highlight) !important; color: white !important; border-radius: 8px; padding: 2px 10px; }
        
        #floating-stop-btn {
            position: fixed; bottom: 30px; right: 30px; background: #e74c3c; color: white; border: none; 
            border-radius: 50%; width: 65px; height: 65px; cursor: pointer; box-shadow: 0 5px 15px rgba(0,0,0,0.3); 
            display: none; z-index: 9999; font-weight: bold;
        }
    </style>
</head>
<body>



<style>
  /* تنسيق شاشة القفل */
  #lockScreen {
    position: fixed; 
    top: 0; left: 0; width: 100%; height: 100%;
    /* تم إصلاح الرابط هنا ليكون سطر واحد */
    background-image: url('https://i.ibb.co/0T6tY6v/Whats-App-Image-2026-01-25-at-8-02-36-AM-1.jpg'); 
    background-size: cover;
    background-position: center;
    z-index: 10000; 
    display: flex; 
    align-items: center; 
    justify-content: center;
    font-family: 'Segoe UI', Tahoma, sans-serif;
    transition: opacity 0.4s ease; /* تأثير تلاشي أنعم */
  }

  #lockScreen::before {
    content: "";
    position: absolute;
    top: 0; left: 0; width: 100%; height: 100%;
    background: rgba(0, 0, 0, 0.6); 
    z-index: -1;
  }

  /* صندوق كلمة المرور */
  .lock-box {
    background: rgba(255, 255, 255, 0.98); 
    padding: 30px 20px; 
    border-radius: 20px; 
    text-align: center;
    box-shadow: 0 20px 40px rgba(0,0,0,0.5); 
    width: 280px; 
    animation: fadeIn 0.5s ease;
  }

  @keyframes fadeIn {
    from { opacity: 0; transform: translateY(-20px); }
    to { opacity: 1; transform: translateY(0); }
  }

  .lock-box h2 { margin: 0; color: #166534; font-size: 20px; }
  .lock-box p { color: #666; font-size: 13px; margin: 8px 0 20px; }

  .lock-box input {
    width: 90%; 
    padding: 12px; 
    margin-bottom: 15px; 
    border: 2px solid #eee; 
    border-radius: 10px; 
    font-size: 16px; 
    text-align: center;
    outline: none;
    transition: border-color 0.3s;
  }

  .lock-box input:focus {
    border-color: #166534;
  }

  .lock-box button {
    background: #166534; 
    color: white; 
    border: none; 
    padding: 12px; 
    border-radius: 10px; 
    cursor: pointer; 
    font-weight: bold; 
    width: 100%; 
    font-size: 15px;
    transition: background 0.3s;
  }

  .lock-box button:hover {
    background: #15803d;
  }

  /* تنسيق المحتوى بعد الفتح (مدارس دلتا) */
  .teacher-branding {
    background: white; 
    border-radius: 20px; 
    padding: 25px; 
    display: flex; 
    flex-direction: column; 
    align-items: center; 
    justify-content: center;
    margin: 60px auto; 
    width: 90%;
    max-width: 400px; 
    border-bottom: 5px solid #fbbf24; 
    box-shadow: 0 10px 25px rgba(0,0,0,0.1);
    text-align: center;
  }

  .teacher-branding img { 
    width: 130px; 
    height: 130px; 
    border-radius: 15px; 
    object-fit: contain; 
    margin-bottom: 15px;
    border: 1px solid #f0f0f0;
  }

  .teacher-details h3 { margin: 0; color: #166534; font-size: 24px; }
  .teacher-details p { margin: 5px 0; font-size: 18px; color: #444; }
</style>

<style>
  /* ... (نفس تنسيقات شاشة القفل السابقة تبقى كما هي) ... */

  /* تنسيق بطاقة مدارس دلتا: اللوجو بجانب النص */
  .teacher-branding {
    background: white; 
    border-radius: 20px; 
    padding: 20px 30px; 
    display: flex; 
    flex-direction: row; /* جعل العناصر بجانب بعضها */
    align-items: center; 
    justify-content: center; /* توسيط المحتوى بالكامل */
    margin: 60px auto; 
    width: fit-content; /* جعل العرض على مقاس المحتوى */
    min-width: 350px;
    border-bottom: 5px solid #fbbf24; 
    box-shadow: 0 10px 25px rgba(0,0,0,0.1);
    direction: ltr; /* لضمان بقاء اللوجو يسار النص */
  }

  .teacher-branding img { 
    width: 90px; /* حجم متناسق للوضع الأفقي */
    height: 90px; 
    border-radius: 12px; 
    object-fit: contain; 
    margin-right: 20px; /* مسافة بين اللوجو والنص */
    border: 1px solid #f0f0f0;
  }

  .teacher-details {
    text-align: left; /* محاذاة النص لليسار ليتناسب مع اللوجو */
  }

  .teacher-details h3 { 
    margin: 0; 
    color: #166534; 
    font-size: 24px; 
    line-height: 1.2;
  }

  .teacher-details p { 
    margin: 2px 0 0 0; 
    font-size: 18px; 
    color: #444; 
    font-weight: bold;
  }

  /* ... (بقية التنسيقات) ... */
</style>

<div class="teacher-branding">
  <img src="https://i.ibb.co/QF17ngZb/Whats-App-Image-2026-01-25-at-8-02-35-AM.jpg" alt="Delta Schools Logo">
  <div class="teacher-details">
    <h3>Delta Schools</h3>
    
  </div>
</div>
</div>

<script>
  function validateAccess() {
    const inputField = document.getElementById('passField');
    const code = inputField.value;
    const masterKey = "Delta Schools"; 
    
    if(code === masterKey) {
      const screen = document.getElementById('lockScreen');
      screen.style.opacity = '0';
      setTimeout(() => {
        screen.style.display = 'none';
      }, 400);
    } else {
      // تغيير لون الإطار للأحمر للتنبيه
      inputField.style.borderColor = "#ef4444";
      alert("⚠️ عذراً، كلمة المرور خاطئة!");
      inputField.value = ""; // مسح الخانة للمحاولة مرة أخرى
      inputField.focus();
    }
  }

  // دعم زر Enter
  document.getElementById('passField').addEventListener("keypress", function(e) {
    if (e.key === "Enter") { validateAccess(); }
  });
</script>
<button id="floating-stop-btn" onclick="stopAllSpeech()">إيقاف ⏹️</button>

<div class="container">
    <h1 style="text-align:center; color:var(--accent-color);">🪁 The Lost Kite - القصة كاملة</h1>

    <div class="controls">
        <div style="display: flex; align-items: center; gap: 10px;">
            <span>⚡ السرعة:</span>
            <input type="range" id="speed" min="0.5" max="1" value="0.8" step="0.1">
        </div>
        <button onclick="stopAllSpeech()" style="background:#f44336; color:white; border:none; padding:8px 15px; border-radius:8px; cursor:pointer; font-weight:bold;">إيقاف الكل ⏹️</button>
    </div>

    <div class="info-card">
        <div class="info-header">📚 كلمات القصة (Vocabulary)</div>
        <div class="vocab-grid">
            <div class="vocab-item" onclick="speakSingle('dates', this)"><span class="vocab-eng">dates</span>بلح</div>
            <div class="vocab-item" onclick="speakSingle('field', this)"><span class="vocab-eng">field</span>حقل</div>
            <div class="vocab-item" onclick="speakSingle('drifted', this)"><span class="vocab-eng">drifted</span>انجرفت</div>
            <div class="vocab-item" onclick="speakSingle('unrolled', this)"><span class="vocab-eng">unrolled</span>فك الخيط</div>
            <div class="vocab-item" onclick="speakSingle('bridge', this)"><span class="vocab-eng">bridge</span>جسر</div>
            <div class="vocab-item" onclick="speakSingle('mud-brick', this)"><span class="vocab-eng">mud-brick</span>طوب لبن</div>
        </div>
    </div>

    <div class="info-card">
        <div class="info-header">👥 الشخصيات (Characters)</div>
        <div class="char-box">
            <div class="char-item"><b>Omar (عمر)</b>الذي يعيش في القرية الهادئة.</div>
            <div class="char-item"><b>Sami (سامي)</b>صديقه صاحب الطائرة الحمراء.</div>
            <div class="char-item"><b>Old Man (العجوز)</b>الرجل الطيب الذي ساعدهما.</div>
        </div>
    </div>

    <div class="info-card" style="border-color: #ffd54f; direction: rtl; text-align: right;">
        <div class="info-header" style="background:#fbc02d; direction: ltr;">🗺️ عناصر القصة (Story Elements)</div>
        <div style="margin-top:10px;">
            <b>المكان (Setting):</b> A quiet village by a wide river.<br>
            <b>المشكلة (Problem):</b> The kite drifted and landed on a roof.<br>
            <b>الدرس (Moral):</b> Kindness makes the world brighter.
        </div>
    </div>

    <button class="btn-section-play play-p1" onclick="playSection('p1')">▶ نطق البداية (Part 1)</button>
    <div id="beginning" class="major-title" style="background:#0288d1">Part 1: The Beginning (البداية)</div>
    
    <div class="sentence-row p1"><span class="eng-single">Omar lived in a quiet village by a wide river.</span><span class="arb-single">عاش عمر في قرية هادئة بجانب نهر واسع.</span></div>
    <div class="sentence-row p1"><span class="eng-single">The village was small, but it was full of life.</span><span class="arb-single">كانت القرية صغيرة، لكنها كانت مليئة بالحياة.</span></div>
    <div class="sentence-row p1"><span class="eng-single">Children played in the dusty streets, women carried baskets to the market, and tall palm trees swayed gently in the breeze.</span><span class="arb-single">لعب الأطفال في الشوارع المتربة، وحملت النساء السلال إلى السوق، وتمايلت أشجار النخيل الطويلة بلطف في النسيم.</span></div>
    <div class="sentence-row p1"><span class="eng-single">Omar loved his home, especially the open field near the edge of the village.</span><span class="arb-single">أحب عمر منزله، وخاصة الحقل المفتوح بالقرب من حافة القرية.</span></div>
    <div class="sentence-row p1"><span class="eng-single">One bright and sunny afternoon, Omar's best friend Sami ran to meet him.</span><span class="arb-single">في أحد فترات بعد الظهر المشرقة والمشمسة، ركض سامي، أعز أصدقاء عمر، لمقابلته.</span></div>
    <div class="sentence-row p1"><span class="eng-single">Sami carried a new red kite, and Omar held a basket of sweet dates that his father had picked that morning.</span><span class="arb-single">حمل سامي طائرة ورقية حمراء جديدة، وأمسك عمر بسلة من البلح الحلو الذي قطفه والده في ذلك الصباح.</span></div>
    <div class="sentence-row p1"><span class="eng-single">"We can eat these when we get tired," Omar said with a smile.</span><span class="arb-single">قال عمر بابتسامة: "يمكننا تناول هذه عندما نتعب".</span></div>
    <div class="sentence-row p1"><span class="eng-single">Sami laughed, "First, let's see how high my kite can fly!"</span><span class="arb-single">ضحك سامي: "أولاً، دعنا نرى مدى ارتفاع طائرتي!"</span></div>

    <button class="btn-section-play play-p2" onclick="playSection('p2')">▶ نطق المنتصف (Part 2)</button>
    <div id="middle" class="major-title" style="background:#f39c12">Part 2: The Middle (المنتصف)</div>
    
    <div class="sentence-row p2"><span class="eng-single">When they reached the field, the boys noticed other kids playing nearby.</span><span class="arb-single">عندما وصلوا إلى الحقل، لاحظ الأولاد أطفالاً آخرين يلعبون في مكان قريب.</span></div>
    <div class="sentence-row p2"><span class="eng-single">Some were chasing a ball, others were climbing trees, but everyone stopped to watch Sami's bright kite.</span><span class="arb-single">كان البعض يطاردون كرة، وآخرون يتسلقون الأشجار، لكن الجميع توقف لمشاهدة طائرة سامي المشرقة.</span></div>
    <div class="sentence-row p2"><span class="eng-single">Sami carefully unrolled the string, and the kite began to rise.</span><span class="arb-single">فك سامي الخيط بعناية، وبدأت الطائرة في الارتفاع.</span></div>
    <div class="sentence-row p2"><span class="eng-single">"Look, Omar!" he shouted. "It's flying higher than the palm trees!"</span><span class="arb-single">صرخ: "انظر يا عمر! إنها تطير أعلى من أشجار النخيل!"</span></div>
    <div class="sentence-row p2"><span class="eng-single">The red kite danced across the blue sky, moving down with the wind.</span><span class="arb-single">رقصت الطائرة الورقية الحمراء عبر السماء الزرقاء، وهي تتحرك مع الريح.</span></div>
    <div class="sentence-row p2"><span class="eng-single">The children clapped and cheered.</span><span class="arb-single">صفق الأطفال وهتفوا.</span></div>
    <div class="sentence-row p2"><span class="eng-single">Sami felt proud his kite was the most beautiful thing he had ever owned.</span><span class="arb-single">شعر سامي بالفخر لأن طائرتي كانت أجمل شيء امتلكه على الإطلاق.</span></div>
    <div class="sentence-row p2"><span class="eng-single">But then, without warning, a strong wind rushed across the field.</span><span class="arb-single">ولكن بعد ذلك، وبدون سابق إنذار، هبت ريح قوية عبر الحقل.</span></div>
    <div class="sentence-row p2"><span class="eng-single">Sami tried to hold the string tightly, but it slipped through his fingers.</span><span class="arb-single">حاول سامي إمساك الخيط بإحكام، لكنه انزلق من بين أصابعه.</span></div>
    <div class="sentence-row p2"><span class="eng-single">"No! Come back!" he cried.</span><span class="arb-single">صرخ: "لا! عودي!"</span></div>
    <div class="sentence-row p2"><span class="eng-single">The kite flew higher and higher until it drifted across the river.</span><span class="arb-single">طارت الطائرة أعلى وأعلى حتى انجرفت عبر النهر.</span></div>
    <div class="sentence-row p2"><span class="eng-single">The kite finally landed on the roof of an old mud-brick building across the river.</span><span class="arb-single">سقطت الطائرة أخيراً على سطح مبنى قديم من الطوب اللبن عبر النهر.</span></div>
    <div class="sentence-row p2"><span class="eng-single">Sami's heart sank. "Oh no," he whispered, tears forming in his eyes.</span><span class="arb-single">شعر سامي بحزن شديد (غرق قلبه). همس والدموع في عينيه: "أوه لا".</span></div>
    <div class="sentence-row p2"><span class="eng-single">"I'll never get it back."</span><span class="arb-single">"لن أستعيدها أبداً".</span></div>
    <div class="sentence-row p2"><span class="eng-single">Omar put a hand on his friend's shoulder. "Don't give up, Sami. Let's try. Maybe someone in that house can help us."</span><span class="arb-single">وضع عمر يده على كتف صديقه وقال: "لا تيأس يا سامي. لنحاول. ربما يمكن لشخص ما في ذلك المنزل مساعدتنا".</span></div>
    <div class="sentence-row p2"><span class="eng-single">The two boys walked along the dusty road, crossed the small wooden bridge over the river, and stopped in front of the old house.</span><span class="arb-single">مشى الولدان على طول الطريق الترابي، وعبرا الجسر الخشبي الصغير فوق النهر، وتوقفا أمام المنزل القديم.</span></div>
    <div class="sentence-row p2"><span class="eng-single">Its walls were faded, and vines climbed around the windows.</span><span class="arb-single">كانت جدرانه باهتة، وتسلقت الكروم حول النوافذ.</span></div>
    <div class="sentence-row p2"><span class="eng-single">Sami felt nervous, but Omar knocked gently on the wooden door.</span><span class="arb-single">شعر سامي بالتوتر، لكن عمر طرق الباب الخشبي بلطف.</span></div>

    <button class="btn-section-play play-p3" onclick="playSection('p3')">▶ نطق النهاية (Part 3)</button>
    <div id="end" class="major-title" style="background:#27ae60">Part 3: The End (النهاية)</div>
    
    <div class="sentence-row p3"><span class="eng-single">After a moment, the door creaked open. An old man with kind eyes and a white beard appeared.</span><span class="arb-single">بعد لحظة، انفتح الباب بصرير. ظهر رجل عجوز بعينين طيبتين ولحية بيضاء.</span></div>
    <div class="sentence-row p3"><span class="eng-single">"Hello!" he greeted warmly. "What brings you here?".</span><span class="arb-single">رحب بهما بحرارة قائلاً: "مرحباً! ما الذي أتى بكما إلى هنا؟".</span></div>
    <div class="sentence-row p3"><span class="eng-single">Sami stepped forward shyly. "My kite... it flew away and landed on your roof. Could you help us, please?"</span><span class="arb-single">تقدم سامي بخجل: "طائرتي... طارت وسقطت على سطح منزلك. هل يمكنك مساعدتنا من فضلك؟"</span></div>
    <div class="sentence-row p3"><span class="eng-single">The old man chuckled. "Ah, I saw it! A very fine kite indeed."</span><span class="arb-single">ضحك الرجل العجوز بهدوء: "آه، لقد رأيتها! إنها طائرة رائعة حقاً".</span></div>
    <div class="sentence-row p3"><span class="eng-single">He fetched a small ladder and slowly climbed up.</span><span class="arb-single">أحضر سلماً صغيراً وصعد ببطء.</span></div>
    <div class="sentence-row p3"><span class="eng-single">The boys watched anxiously as he reached out and untangled the kite from the tiles.</span><span class="arb-single">راقب الأولاد بقلق بينما كان يمد يده ويفك تشابك الطائرة من القرميد.</span></div>
    <div class="sentence-row p3"><span class="eng-single">Finally, he climbed down carefully and placed the kite back into Sami's hands.</span><span class="arb-single">وأخيراً، نزل بعناية ووضع الطائرة بين يدي سامي.</span></div>
    <div class="sentence-row p3"><span class="eng-single">"Here you are, young man," he said with a smile. "Take care to hold it tighter next time."</span><span class="arb-single">قال بابتسامة: "ها هي يا بني، احرص على إمساكها بإحكام في المرة القادمة".</span></div>
    <div class="sentence-row p3"><span class="eng-single">Sami hugged his kite tightly. "Thank you, sir! You saved my day," he said, his face glowing with joy.</span><span class="arb-single">احتضن سامي طائرته بقوة وقال: "شكراً لك يا سيدي! لقد أنقذت يومي"، وكان وجهه يتوهج بالفرح.</span></div>
    <div class="sentence-row p3"><span class="eng-single">Omar added, "We will always remember your kindness."</span><span class="arb-single">وأضاف عمر: "سنتذكر دائماً لطفك".</span></div>
    <div class="sentence-row p3"><span class="eng-single">The old man nodded. "Kindness makes the world brighter, just like your red kite in the sky."</span><span class="arb-single">أومأ الرجل العجوز برأسه: "اللطف يجعل العالم أكثر إشراقاً، تماماً مثل طائرتك الحمراء في السماء".</span></div>
    <div class="sentence-row p3"><span class="eng-single">The boys waved goodbye and ran back to the field.</span><span class="arb-single">ودع الأولاد الرجل وركضوا عائدين إلى الحقل.</span></div>
    <div class="sentence-row p3"><span class="eng-single">This time, Sami held the string with both hands while Omar stood beside him, ready to help.</span><span class="arb-single">هذه المرة، أمسك سامي الخيط بكلتا يديه بينما وقف عمر بجانبه مستعداً للمساعدة.</span></div>
    <div class="sentence-row p3"><span class="eng-single">The kite rose once again, soaring high above the village.</span><span class="arb-single">ارتفعت الطائرة مرة أخرى، تحلق عالياً فوق القرية.</span></div>
    <div class="sentence-row p3"><span class="eng-single">Sami and Omar laughed as it danced against the blue sky, happy that their adventure had a wonderful ending.</span><span class="arb-single">ضحك سامي وعمر وهي ترقص مقابل السماء الزرقاء، سعيدين بأن مغامرتهما انتهت بنهاية رائعة.</span></div>
</div>

<script>
    const synth = window.speechSynthesis;
    const speedInput = document.getElementById('speed');
    let isPlayingQueue = false;

    function stopAllSpeech() {
        synth.cancel();
        isPlayingQueue = false;
        document.getElementById('floating-stop-btn').style.display = 'none';
        document.querySelectorAll('.speaking-highlight').forEach(el => el.classList.remove('speaking-highlight'));
    }

    function speakSingle(text, el) {
        stopAllSpeech();
        const utter = new SpeechSynthesisUtterance(text);
        utter.rate = parseFloat(speedInput.value);
        utter.lang = 'en-US';
        if (el) {
            el.classList.add('speaking-highlight');
            utter.onend = () => el.classList.remove('speaking-highlight');
        }
        synth.speak(utter);
    }

    document.querySelectorAll('.eng-single').forEach(item => {
        item.onclick = function() { speakSingle(this.innerText, this); }
    });

    function playSection(partClass) {
        stopAllSpeech();
        isPlayingQueue = true;
        document.getElementById('floating-stop-btn').style.display = 'block';
        
        const sentences = document.querySelectorAll(`.${partClass} .eng-single`);
        let index = 0;

        function next() {
            if (index < sentences.length && isPlayingQueue) {
                const el = sentences[index];
                const utter = new SpeechSynthesisUtterance(el.innerText);
                utter.rate = parseFloat(speedInput.value);
                utter.lang = 'en-US';
                
                el.classList.add('speaking-highlight');
                el.scrollIntoView({ behavior: 'smooth', block: 'center' });

                utter.onend = () => { 
                    el.classList.remove('speaking-highlight'); 
                    index++; 
                    if (isPlayingQueue) next();
                    else stopAllSpeech();
                };
                synth.speak(utter);
            } else {
                stopAllSpeech();
            }
        }
        next();
    }
</script>
</body>
</html>